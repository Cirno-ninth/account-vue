(function(e){function t(t){for(var o,a,i=t[0],l=t[1],c=t[2],m=0,d=[];m<i.length;m++)a=i[m],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);u&&u(t);while(d.length)d.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],o=!0,i=1;i<s.length;i++){var l=s[i];0!==r[l]&&(o=!1)}o&&(n.splice(t--,1),e=a(a.s=s[0]))}return e}var o={},r={app:0},n=[];function a(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=o,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(s,o,function(t){return e[t]}.bind(null,o));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0c5b":function(e,t,s){},"11d7":function(e,t,s){"use strict";var o=s("ad7d"),r=s.n(o);r.a},1313:function(e,t,s){},"18fa":function(e,t,s){"use strict";var o=s("585a"),r=s.n(o);r.a},"242e":function(e,t,s){"use strict";var o=s("e276"),r=s.n(o);r.a},"2ac5":function(e,t,s){"use strict";var o=s("e547"),r=s.n(o);r.a},"3b16":function(e,t,s){"use strict";var o=s("cca0"),r=s.n(o);r.a},"4e5d":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var o=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[e.mobile?s("router-view"):s("el-container",[s("el-header",{staticClass:"header"},[s("headerBar")],1),s("el-main",[s("router-view")],1)],1)],1)},n=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"headerClass"},[s("el-link",{attrs:{type:"primary",underline:!1},on:{click:function(t){return e.toRouter("/index")}}},[e._v("CirnoVip")]),this.$store.state.isLogin?s("div",[s("div",{staticClass:"hello"},[e._v(" 欢迎，"),s("span",{on:{click:function(t){return e.toRouter("/person")}}},[e._v(e._s(e.username))])]),s("el-button",{staticClass:"button",attrs:{type:"info",round:""},on:{click:function(t){return e.logout()}}},[e._v("登出")])],1):s("div",[s("div",{staticClass:"hello"},[e._v("请登录")]),s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"button",attrs:{type:"primary",round:""},on:{click:function(t){return e.toRouter("/login")}}},[e._v("登入")])],1)],1)},i=[],l=s("5530"),c=s("8876"),u={data:function(){return{fullscreenLoading:!1}},computed:Object(l["a"])({},Object(c["b"])(["username"])),methods:{toRouter:function(e){var t=this;this.$router.push(e),this.fullscreenLoading=!0,setTimeout((function(){t.fullscreenLoading=!1}),1e3)},logout:function(){var e=this;this.$store.commit("logoutMutation"),setTimeout((function(){e.$store.state.isLogin?e.$message.error("发生错误"):e.$message({message:"登出成功"})}),500)}}},m=u,d=(s("2ac5"),s("2877")),f=Object(d["a"])(m,a,i,!1,null,"131a43d4",null),p=f.exports,h={data:function(){return{mobile:!1}},components:{headerBar:p},mounted:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;e<t?(this.mobile=!0,this.$router.push("/mobile/index")):(this.mobile=!1,this.$router.push("/index"))}},g=h,v=(s("18fa"),Object(d["a"])(g,r,n,!1,null,"02807a50",null)),b=v.exports,w=s("2ca7"),$=s.n(w),k=(s("46c6"),s("1bee")),_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._v("这里是一个首页")])},y=[],x={},C=Object(d["a"])(x,_,y,!1,null,null,null),T=C.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[this.$store.state.isLogin?s("div",[s("mt-header",{attrs:{fixed:"",title:"CirnoVip"}},[s("mt-button",{attrs:{slot:"right"},on:{click:function(t){return e.logout()}},slot:"right"},[e._v("登出")])],1)],1):s("div",[s("mt-header",{attrs:{fixed:"",title:"CirnoVip"}},[s("router-link",{attrs:{slot:"right",to:"/mobile/login"},slot:"right"},[s("mt-button",[e._v("登录")])],1)],1)],1),s("div",{staticClass:"body"},[this.$store.state.isLogin?s("p",[e._v("欢迎回来，"+e._s(this.$store.state.username))]):s("p",[e._v("这里是一个首页")])])])},L=[],j=s("660a"),A=s.n(j),S={methods:{logout:function(){var e=this;this.$store.commit("logoutMutation"),j["Indicator"].open(),setTimeout((function(){j["Indicator"].close(),e.$store.state.isLogin?Object(j["Toast"])({message:"发生错误"}):Object(j["Toast"])({message:"已登出"})}),1e3)}}},E=S,z=(s("825c"),Object(d["a"])(E,O,L,!1,null,"203c2f04",null)),I=z.exports,R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loginClass"},[s("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[this.loginName?s("div",[s("el-form-item",{attrs:{label:"用户名",prop:"name"}},[s("el-input",{key:"name",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1):s("div",[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{key:"email",model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{"show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("el-form-item",[s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary",disabled:this.$store.state.is_login},on:{click:function(t){return e.onSubmit("form")}}},[e._v("登入")]),s("el-button",{attrs:{type:"primary",disabled:this.$store.state.is_login},on:{click:function(t){return e.switchLoginType(e.loginName)}}},[e._v(e._s(e.loginType))]),s("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取消")]),s("el-link",{attrs:{type:"info",id:"register",href:"/#/register"}},[e._v("没有账号？注册一个")]),s("p",[s("el-link",{attrs:{type:"info",href:"/#/forgot-password"}},[e._v("找回密码")])],1)],1)],1)],1)},V=[],U=(s("b0c0"),{data:function(){return{form:{name:"",password:"",email:""},rules:{name:[{required:!0,message:"请输入用户名！",trigger:"change"}],email:[{type:"email",required:!0,message:"请输入正确的邮箱地址！",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}]},fullscreenLoading:!1,loginName:!0,loginType:"邮箱登录"}},methods:{switchLoginType:function(e){this.loginName=!this.loginName,this.loginType=e?"用户名登录":"邮箱登录"},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var s=null;if(t.loginName)s={username:t.$refs.form.model.name,password:t.$refs.form.model.password},t.$store.dispatch("getUserAction",s);else{var o=encodeURIComponent(t.$refs.form.model.email);s={email:o,password:t.$refs.form.model.password},t.$store.dispatch("getEUserAction",s)}t.fullscreenLoading=!0,setTimeout((function(){t.fullscreenLoading=!1,t.$store.state.isLogin?(t.$message({message:"欢迎回来,"+t.$store.state.username,type:"success"}),t.$router.push("/index")):t.$message.error(t.$store.state.message)}),1e3)}}))},cancel:function(){this.$router.go(-1)}},mounted:function(){this.$store.state.isLogin?this.$router.push("/index"):this.$store.dispatch("getCsrftokenAction")}}),N=U,M=(s("ff81"),Object(d["a"])(N,R,V,!1,null,"575cd831",null)),P=M.exports,q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"header"}},[s("mt-header",{attrs:{fixed:"",title:"CirnoVip"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(t){return e.$router.go(-1)}},slot:"left"})],1)],1),s("div",{staticClass:"body"},[e.type?s("div",[s("mt-field",{staticClass:"input",attrs:{label:"用户名",placeholder:"请输入用户名",state:e.state1},on:{input:function(t){return e.checkV("username")}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1):s("div",[s("mt-field",{staticClass:"input",attrs:{label:"邮箱",placeholder:"请输入邮箱",type:"email",state:e.state1},on:{input:function(t){return e.checkV("email")}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),s("mt-field",{staticClass:"input",attrs:{label:"密码",placeholder:"请输入密码",type:"password",state:e.state2},on:{input:function(t){return e.checkV()}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("mt-button",{staticClass:"button",attrs:{type:"primary",size:"large"},on:{click:function(t){return e.onSubmit()}}},[e._v("登录")]),s("mt-button",{staticClass:"button1",attrs:{type:"primary"},on:{click:function(t){return e.switchType()}}},[e._v(e._s(e.message))]),s("mt-button",{staticClass:"button2",attrs:{type:"default"},on:{click:function(t){return e.toRouter("/mobile/forgot-password")}}},[e._v("忘记密码？")]),s("mt-button",{staticClass:"button3",attrs:{type:"default"},on:{click:function(t){return e.toRouter("/mobile/register")}}},[e._v("还没有账号？")])],1)])},F=[],X=(s("4d63"),s("ac1f"),s("25f0"),{data:function(){return{username:"",email:"",password:"",state1:null,state2:null,type:!0,message:"切换邮箱登录"}},methods:{checkV:function(e){if("username"==e)this.username?this.state1="success":this.state1="error";else if("email"==e){var t=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");t.test(this.email)?this.state1="success":this.state1="error"}else this.password?this.state2="success":this.state2="error"},switchType:function(){this.type?this.message="切换用户名登录":this.message="切换邮箱登录",this.type=!this.type},onSubmit:function(){var e=this;if("success"==this.state1&&"success"==this.state2){if(j["Indicator"].open(),this.type){var t={username:this.username,password:this.password};this.$store.dispatch("getUserAction",t)}else{var s=encodeURIComponent(this.email),o={email:s,password:this.password};this.$store.dispatch("getEUserAction",o)}setTimeout((function(){j["Indicator"].close(),e.$store.state.isLogin?(Object(j["Toast"])({message:"操作成功"}),e.$router.push("/mobile/index")):Object(j["Toast"])({message:e.$store.state.message})}),1e3)}else Object(j["Toast"])({message:"请检查填写的内容",duration:5e3})},toRouter:function(e){this.$router.push(e)}},mounted:function(){this.$store.state.isLogin?this.$router.push("/mobile/index"):this.$store.dispatch("getCsrftokenAction")}}),B=X,J=(s("11d7"),Object(d["a"])(B,q,F,!1,null,"4dc82a2d",null)),H=J.exports,W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loginClass"},[s("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[s("div",[s("el-form-item",{attrs:{label:"用户名",prop:"name"}},[s("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),s("div",[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{"show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"password1"}},[s("el-input",{attrs:{"show-password":""},model:{value:e.form.password1,callback:function(t){e.$set(e.form,"password1",t)},expression:"form.password1"}})],1),s("el-form-item",[s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary",disabled:this.$store.state.is_login},on:{click:function(t){return e.onSubmit("form")}}},[e._v("注册")]),s("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取消")]),s("el-link",{attrs:{type:"info",id:"toLogin",href:"/#/login"}},[e._v("已有账号？去登录")])],1)],1)],1)},D=[],G={data:function(){return{form:{name:"",password:"",password1:"",email:""},rules:{name:[{required:!0,message:"请输入用户名！",trigger:"blur"}],email:[{type:"email",required:!0,message:"请输入正确的邮箱地址！",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"change"}],password1:[{required:!0,message:"请再输入一遍密码！",trigger:"change"}]},fullscreenLoading:!1}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var s=encodeURIComponent(t.$refs.form.model.email),o={username:t.$refs.form.model.name,email:s,password1:t.$refs.form.model.password,password2:t.$refs.form.model.password1};t.$store.dispatch("registerAction",o),t.fullscreenLoading=!0,setTimeout((function(){t.fullscreenLoading=!1,"ok"===t.$store.state.message?(t.$message({message:"注册成功，请前往邮箱确认！",type:"success"}),t.$router.push("/login")):t.$message.error(t.$store.state.message)}),1e3)}}))},cancel:function(){this.$router.go(-1)}},mounted:function(){this.$store.state.isLogin?this.$router.push("/index"):this.$store.dispatch("getCsrftokenAction")}},K=G,Q=(s("eb66"),Object(d["a"])(K,W,D,!1,null,"16808e07",null)),Y=Q.exports,Z=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"header"}},[s("mt-header",{attrs:{fixed:"",title:"CirnoVip"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(t){return e.$router.go(-1)}},slot:"left"})],1)],1),s("div",{staticClass:"body"},[s("mt-field",{staticClass:"input",attrs:{label:"用户名",placeholder:"请输入用户名",state:e.state[0]},on:{input:function(t){return e.checkV("username")}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("mt-field",{staticClass:"input",attrs:{label:"邮箱",placeholder:"请输入邮箱",type:"email",state:e.state[1]},on:{input:function(t){return e.checkV("email")}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("mt-field",{staticClass:"input",attrs:{label:"密码",placeholder:"请输入密码",type:"password",state:e.state[2]},on:{input:function(t){return e.checkV("password1")}},model:{value:e.password1,callback:function(t){e.password1=t},expression:"password1"}}),s("mt-field",{staticClass:"input",attrs:{label:"密码",placeholder:"请输入密码",type:"password",state:e.state[3]},on:{input:function(t){return e.checkV()}},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),s("mt-button",{staticClass:"button",attrs:{type:"primary",size:"large"},on:{click:function(t){return e.onSubmit()}}},[e._v("注册")])],1)])},ee=[],te={data:function(){return{username:"",email:"",password1:"",password2:"",state:[]}},methods:{checkV:function(e){if("username"==e)this.username?this.state[0]="success":this.state[0]="error";else if("email"==e){var t=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");t.test(this.email)?this.state[1]="success":this.state[1]="error"}else"password1"==e?this.password1?this.state[2]="success":this.state[2]="error":this.password2?this.state[3]="success":this.state[3]="error"},onSubmit:function(){var e=this;if(!1!==this.checkState()){j["Indicator"].open();var t=encodeURIComponent(this.email),s={username:this.username,email:t,password1:this.password1,password2:this.password2};this.$store.dispatch("registerAction",s),setTimeout((function(){j["Indicator"].close(),"ok"===e.$store.state.message?(Object(j["Toast"])({message:"注册成功，请查看邮箱！"}),e.$router.push("/mobile/login")):Object(j["Toast"])({message:e.$store.state.message})}),1e3)}else Object(j["Toast"])({message:"请检查填写的内容",duration:5e3})},checkState:function(){for(var e=0;e<4;e++)if("success"!=this.state[e])return!1}},mounted:function(){this.$store.state.isLogin?this.$router.push("/mobile/index"):this.$store.dispatch("getCsrftokenAction")}},se=te,oe=(s("ef6e"),Object(d["a"])(se,Z,ee,!1,null,"76f18f62",null)),re=oe.exports,ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}]},[s("el-alert",{attrs:{title:e.message,type:"success",center:"","show-icon":""}}),s("el-link",{attrs:{type:"info",href:"/#/login"}},[e._v(e._s(e.time)+"秒后自动跳转，若未跳转请点击这里")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.fail,expression:"fail"}]},[s("el-alert",{attrs:{title:e.message,type:"error",center:"","show-icon":""}})],1)])},ae=[],ie={props:["code"],data:function(){return{success:!1,fail:!1,message:"",time:3}},mounted:function(){var e=this;this.$store.dispatch("confirmAction",this.code),setTimeout((function(){"ok"===e.$store.state.message?(e.success=!0,e.fail=!1,e.message="确认成功，请前往登录！",setInterval((function(){e.getTime()}),1e3)):(e.fail=!0,e.message=e.$store.state.message)}),1e3)},methods:{getTime:function(){this.time>0?this.time--:(clearInterval(),this.$router.push("/login"))}}},le=ie,ce=Object(d["a"])(le,ne,ae,!1,null,null,null),ue=ce.exports,me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("mt-spinner",{attrs:{type:"snake",color:"#26a2ff"}}),s("router-link",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}],attrs:{to:"/login"}},[e._v(e._s(e.time)+"秒后自动跳转，若未跳转请点击这里")])],1)},de=[],fe={props:["code"],data:function(){return{message:"",time:3,success:!1}},mounted:function(){var e=this;this.$store.dispatch("confirmAction",this.code),setTimeout((function(){"ok"===e.$store.state.message?(e.success=!0,Object(j["Toast"])({message:"确认成功，请前往登录"}),setInterval((function(){e.getTime()}),1e3)):Object(j["Toast"])({message:e.$store.state.message})}),1e3)},methods:{getTime:function(){this.time>0?this.time--:(this.$router.push("/mobile/login"),clearInterval())}}},pe=fe,he=Object(d["a"])(pe,me,de,!1,null,null,null),ge=he.exports,ve=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._v(" 个人主页 ")])},be=[],we={},$e=Object(d["a"])(we,ve,be,!1,null,null,null),ke=$e.exports,_e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e._v("person")])},ye=[],xe={},Ce=Object(d["a"])(xe,_e,ye,!1,null,null,null),Te=Ce.exports,Oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loginClass"},[s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}],attrs:{title:e.message,type:"success",center:"","show-icon":""}}),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.fail,expression:"fail"}],attrs:{title:e.message,type:"error",center:"","show-icon":""}}),s("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[s("div",[s("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[s("el-input",{model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),s("el-form-item",[s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary",disabled:this.$store.state.is_login},on:{click:function(t){return e.onSubmit("form")}}},[e._v("重置密码")]),s("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取消")])],1)],1)],1)},Le=[],je={data:function(){return{message:"",success:"",fail:"",form:{email:""},rules:{email:[{type:"email",required:!0,message:"请输入正确的邮箱地址！",trigger:"blur"}]},fullscreenLoading:!1}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var s=encodeURIComponent(t.$refs.form.model.email),o={email:s};t.$store.dispatch("forgotPasswordAction",o),setTimeout((function(){"ok"===t.$store.state.message?(t.success=!0,t.message="重置成功，请前往邮箱确认！"):(t.fail=!0,t.message=t.$store.state.message)}),1e3)}}))},cancel:function(){this.$router.go(-1)}},mounted:function(){this.$store.state.isLogin?this.$router.push("/index"):this.$store.dispatch("getCsrftokenAction")}},Ae=je,Se=(s("3b16"),Object(d["a"])(Ae,Oe,Le,!1,null,"e4def86e",null)),Ee=Se.exports,ze=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"header"}},[s("mt-header",{attrs:{fixed:"",title:"CirnoVip"}},[s("mt-button",{attrs:{slot:"left",icon:"back"},on:{click:function(t){return e.$router.go(-1)}},slot:"left"})],1)],1),s("div",{staticClass:"body"},[s("mt-field",{staticClass:"input",attrs:{label:"邮箱",placeholder:"请输入邮箱",type:"email",state:e.state1},on:{input:function(t){return e.checkV()}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),s("mt-button",{staticClass:"button",attrs:{type:"primary",size:"large"},on:{click:function(t){return e.onSubmit()}}},[e._v("确认")])],1)])},Ie=[],Re={data:function(){return{email:"",state1:null}},methods:{checkV:function(){var e=new RegExp("^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$");e.test(this.email)?this.state1="success":this.state1="error"},onSubmit:function(){var e=this;if("success"==this.state1){j["Indicator"].open();var t=encodeURIComponent(this.email),s={email:t};this.$store.dispatch("forgotPasswordAction",s),setTimeout((function(){j["Indicator"].close(),"ok"===e.$store.state.message?(Object(j["Toast"])({message:"操作成功"}),e.$router.push("/mobile/index")):Object(j["Toast"])({message:e.$store.state.message})}),1e3)}else Object(j["Toast"])({message:"请检查填写的内容",duration:5e3})}},mounted:function(){this.$store.state.isLogin?this.$router.push("/mobile/index"):this.$store.dispatch("getCsrftokenAction")}},Ve=Re,Ue=(s("dd7e"),Object(d["a"])(Ve,ze,Ie,!1,null,"2fd00954",null)),Ne=Ue.exports,Me=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"loginClass"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.success,expression:"success"}]},[s("el-alert",{attrs:{title:e.message,type:"success",center:"","show-icon":""}}),s("el-link",{attrs:{type:"info",href:"/#/login"}},[e._v(e._s(e.time)+"秒后自动跳转，若未跳转请点击这里")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.fail,expression:"fail"}]},[s("el-alert",{attrs:{title:e.message,type:"error",center:"","show-icon":""}})],1),s("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"80px"}},[s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{"show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),s("el-form-item",{attrs:{label:"确认密码",prop:"password1"}},[s("el-input",{attrs:{"show-password":""},model:{value:e.form.password1,callback:function(t){e.$set(e.form,"password1",t)},expression:"form.password1"}})],1),s("el-form-item",[s("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{type:"primary",disabled:e.confirmed},on:{click:function(t){return e.onSubmit("form")}}},[e._v("确认")]),s("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取消")])],1)],1)],1)},Pe=[],qe={props:["code"],data:function(){return{form:{password:"",password1:""},rules:{password:[{required:!0,message:"请输入密码",trigger:"change"}],password1:[{required:!0,message:"请再输入一遍密码！",trigger:"change"}]},fullscreenLoading:!1,confirmed:!0,success:!1,fail:!1,time:3,message:""}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var s={password1:t.$refs.form.model.password,password2:t.$refs.form.model.password1,code:t.code};t.$store.dispatch("setPasswordAction",s),t.fullscreenLoading=!0,setTimeout((function(){t.fullscreenLoading=!1,"ok"===t.$store.state.message?(t.success=!0,t.fail=!1,t.message="修改成功，请前往登录！",setInterval((function(){t.getTime()}),1e3)):(t.message=t.$store.state.message,t.fail=!0)}),1e3)}}))},cancel:function(){this.$router.go(-1)},getTime:function(){this.time>0?this.time--:(clearInterval(),this.$router.push("/login"))}},mounted:function(){var e=this;this.$store.state.isLogin?this.$router.push("/index"):(this.$store.dispatch("getCsrftokenAction"),this.$store.dispatch("confirmForgotCodeAction",this.code),setTimeout((function(){"ok"!==e.$store.state.message?(e.message=e.$store.state.message,e.fail=!0):e.confirmed=!1}),1e3))}},Fe=qe,Xe=(s("242e"),Object(d["a"])(Fe,Me,Pe,!1,null,"d991e55a",null)),Be=Xe.exports,Je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"header"}},[s("mt-header",{attrs:{fixed:"",title:"CirnoVip"}})],1),s("div",{staticClass:"body"},[s("mt-field",{staticClass:"input",attrs:{label:"密码",placeholder:"请输入密码",type:"password",state:e.state1},on:{input:function(t){return e.checkV("password1")}},model:{value:e.password1,callback:function(t){e.password1=t},expression:"password1"}}),s("mt-field",{staticClass:"input",attrs:{label:"确认密码",placeholder:"请输入密码",type:"password",state:e.state2},on:{input:function(t){return e.checkV("password2")}},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}}),s("mt-button",{staticClass:"button",attrs:{type:"primary",size:"large",disabled:e.confirmed},on:{click:function(t){return e.onSubmit()}}},[e._v("确认")])],1)])},He=[],We={props:["code"],data:function(){return{password1:"",password2:"",state1:null,state2:null,confirmed:!0}},methods:{checkV:function(e){"password1"==e?this.password1?this.state1="success":this.state1="error":this.password2?this.state2="success":this.state2="error"},onSubmit:function(){var e=this,t={password1:this.password1,password2:this.password2,code:this.code};this.$store.dispatch("setPasswordAction",t),j["Indicator"].open(),setTimeout((function(){j["Indicator"].close(),"ok"===e.$store.state.message?(Object(j["Toast"])({message:"修改成功，请前往登录"}),e.$router.push("/mobile/login")):Object(j["Toast"])({message:e.$store.state.message})}),1e3)}},mounted:function(){var e=this;this.$store.state.isLogin?this.$router.push("/mobile/index"):(this.$store.dispatch("getCsrftokenAction"),this.$store.dispatch("confirmForgotCodeAction",this.code),setTimeout((function(){"ok"!==e.$store.state.message?Object(j["Toast"])({message:e.$store.state.message}):e.confirmed=!1}),1e3))}},De=We,Ge=(s("977a"),Object(d["a"])(De,Je,He,!1,null,"8021407c",null)),Ke=Ge.exports;o["default"].use(k["a"]);var Qe=[{path:"/index",component:T},{path:"/mobile/index",component:I},{path:"/login",component:P},{path:"/mobile/login",component:H},{path:"/register",component:Y},{path:"/mobile/register",component:re},{path:"/confirm/:code",component:ue,props:!0},{path:"/mobile/confirm/:code",component:ge,props:!0},{path:"/set_password/:code",component:Be,props:!0},{path:"/mobile/set_password/:code",component:Ke,props:!0},{path:"/person",component:ke},{path:"/mobile/person",component:Te},{path:"/forgot-password",component:Ee},{path:"/mobile/forgot-password",component:Ne},{path:"",component:T},{path:"*",component:T}],Ye=new k["a"]({mode:"hash",base:"",routes:Qe}),Ze=Ye,et=s("82ae"),tt=s.n(et);o["default"].use(c["a"]);var st=new c["a"].Store({state:{isLogin:!1,username:"",userid:"",csrf_token:"",message:""},mutations:{getUserMutation:function(e,t){e.message=t,t.userid&&(e.isLogin=!0,e.userid=t.userid,e.username=t.username)},getCsrftokenMutation:function(e,t){e.csrf_token=t},logoutMutation:function(e){e.isLogin=!1,e.username="",e.userid=""}},actions:{setPasswordAction:function(e,t){var s=e.commit,o=e.state,r="csrfmiddlewaretoken="+o.csrf_token+"&password1="+t.password1+"&password2="+t.password2+"&code="+t.code;tt.a.post("http://localhost:8000/login/set_password/",r,{headers:{"X-CSRFToken":this.csrf_token}}).then((function(e){s("getUserMutation",e.data)}))},confirmForgotCodeAction:function(e,t){var s=e.commit;tt()({url:"http://localhost:8000/login/forgot_password/?code="+t}).then((function(e){s("getUserMutation",e.data)}))},forgotPasswordAction:function(e,t){var s=e.commit,o=e.state,r="csrfmiddlewaretoken="+o.csrf_token+"&email="+t.email;tt.a.post("http://localhost:8000/login/forgot_password/",r,{headers:{"X-CSRFToken":this.csrf_token}}).then((function(e){s("getUserMutation",e.data)}))},confirmAction:function(e,t){var s=e.commit;tt()({url:"http://localhost:8000/login/confirm/?code="+t}).then((function(e){s("getUserMutation",e.data)}))},registerAction:function(e,t){var s=e.commit,o=e.state,r="csrfmiddlewaretoken="+o.csrf_token+"&username="+t.username+"&password1="+t.password1+"&password2="+t.password2+"&email="+t.email;tt.a.post("http://localhost:8000/login/register/",r,{headers:{"X-CSRFToken":this.csrf_token}}).then((function(e){s("getUserMutation",e.data)}))},getUserAction:function(e,t){var s=e.commit,o=e.state,r="csrfmiddlewaretoken="+o.csrf_token+"&username="+t.username+"&password="+t.password;tt.a.post("http://localhost:8000/login/login/",r,{headers:{"X-CSRFToken":this.csrf_token}}).then((function(e){s("getUserMutation",e.data)}))},getEUserAction:function(e,t){var s=e.commit,o=e.state,r="csrfmiddlewaretoken="+o.csrf_token+"&email="+t.email+"&password="+t.password;tt.a.post("http://localhost:8000/login/email_login/",r,{headers:{"X-CSRFToken":this.csrf_token}}).then((function(e){s("getUserMutation",e.data)}))},getCsrftokenAction:function(e){var t=e.commit;tt()({url:"http://localhost:8000/get_token/"}).then((function(e){t("getCsrftokenMutation",e.data)}))}},modules:{}});s("4f89");o["default"].use(A.a),o["default"].use($.a),o["default"].config.productionTip=!1,new o["default"]({router:Ze,store:st,render:function(e){return e(b)}}).$mount("#app")},"585a":function(e,t,s){},"825c":function(e,t,s){"use strict";var o=s("a7eb"),r=s.n(o);r.a},9064:function(e,t,s){},"977a":function(e,t,s){"use strict";var o=s("1313"),r=s.n(o);r.a},a7eb:function(e,t,s){},ad7d:function(e,t,s){},c565:function(e,t,s){},cca0:function(e,t,s){},dd7e:function(e,t,s){"use strict";var o=s("0c5b"),r=s.n(o);r.a},e276:function(e,t,s){},e547:function(e,t,s){},eb66:function(e,t,s){"use strict";var o=s("4e5d"),r=s.n(o);r.a},ef6e:function(e,t,s){"use strict";var o=s("c565"),r=s.n(o);r.a},ff81:function(e,t,s){"use strict";var o=s("9064"),r=s.n(o);r.a}});
//# sourceMappingURL=app.67f9af8d.js.map